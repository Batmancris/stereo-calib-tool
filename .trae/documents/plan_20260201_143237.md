# 文件保存路径调整计划

## 分析现状

用户明确指定了文件保存的具体位置：
- 录制文件和截图文件：`E:\research\0\stero\record`
- YAML文件：`E:\research\0\stero\yaml`

当前代码中的文件保存路径：
- 在 `config.py` 中定义了 `RECORD_DIR = r"E:\research\0\stero"`
- 在 `record.py` 中也有一个独立的 `RECORD_DIR` 定义
- 录制文件和截图文件保存在 `RECORD_DIR` 目录下
- 标定结果文件保存在 `RECORD_DIR` 目录下

## 修改计划

1. **修改 config.py**：
   - 添加 `RECORD_DIR` 和 `YAML_DIR` 配置
   - 确保两个目录都存在

2. **修改 record.py**：
   - 移除独立的 `RECORD_DIR` 定义
   - 从 `config.py` 导入 `RECORD_DIR` 配置

3. **修改标定结果保存位置**：
   - 在 `calib_tab.py` 中修改 `out_yaml` 的生成路径
   - 将标定结果保存到 `YAML_DIR` 目录下

4. **修改文件选择对话框路径**：
   - 在 `rectify_tab.py` 中修改文件选择对话框的默认路径
   - 视频选择默认路径改为 `RECORD_DIR`
   - YAML 选择默认路径改为 `YAML_DIR`

## 具体修改点

1. **config.py**：
   - 修改 `RECORD_DIR` 为 `r"E:\research\0\stero\record"`
   - 添加 `YAML_DIR = os.path.join(RECORD_DIR, "../yaml")`
   - 添加创建目录的代码：
     ```python
     os.makedirs(RECORD_DIR, exist_ok=True)
     os.makedirs(YAML_DIR, exist_ok=True)
     ```

2. **record.py**：
   - 移除第 42 行的 `RECORD_DIR = r"E:\research\0\stero"`
   - 添加 `from config import RECORD_DIR` 导入

3. **calib_tab.py**：
   - 从 `config` 导入 `YAML_DIR`
   - 修改 `CalibThread` 初始化，传递 `record_dir=YAML_DIR`
   - 修改 `out_yaml` 的生成路径为 `os.path.join(self.record_dir, f"stereo_calib_{ts_str}_stRMS{rmsS:.2f}_B{baseline:.1f}mm.yaml")`

4. **rectify_tab.py**：
   - 从 `config` 导入 `RECORD_DIR` 和 `YAML_DIR`
   - 修改 `pick_yaml` 方法，文件选择对话框的默认路径改为 `YAML_DIR`
   - 修改 `pick_video` 方法，文件选择对话框的默认路径改为 `RECORD_DIR`

这些修改将确保所有文件保存路径与用户指定的路径一致。